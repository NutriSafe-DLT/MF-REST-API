name: CXGO SCAN
'on':
  push:
    branches:
      - mf_sast
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      - uses: actions/setup-node@v1
      - if: github.event_name == 'push'
        name: Extract Branch Name
        run: 'echo "BRANCH=$(echo ${GITHUB_REF##*/})" >> $GITHUB_ENV'
      - if: github.event_name == 'pull_request'
        name: Extract Branch Name
        run: 'echo "BRANCH=$(echo ${GITHUB_HEAD_REF})" >> $GITHUB_ENV'
      - name: Install cxgo-cli npm package
        run: npm install -g @cxgo/cli
      - name: Checkmarx CxFlow Action
        uses: checkmarx-ts/checkmarx-cxflow-github-action@v1.1
        with:
            checkmarx_client_secret: ${{ secrets.CHECKMARKS_TOKEN }}